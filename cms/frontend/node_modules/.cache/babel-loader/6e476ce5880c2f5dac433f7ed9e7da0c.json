{"ast":null,"code":"import axios from 'axios';\nimport swal from \"sweetalert\";\nimport { loginConfirmedAction, logout } from '../store/actions/AuthActions';\nexport function signUp(email, password) {\n  //axios call\n  const postData = {\n    email,\n    password,\n    returnSecureToken: true\n  };\n  return axios.post(`https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyD3RPAp3nuETDn9OQimqn_YF6zdzqWITII`, postData);\n}\nexport function login(email, password) {\n  const postData = {\n    email,\n    password,\n    returnSecureToken: true\n  };\n  return axios.post(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyD3RPAp3nuETDn9OQimqn_YF6zdzqWITII`, postData);\n}\nexport function formatError(errorResponse) {\n  switch (errorResponse.error.message) {\n    case 'EMAIL_EXISTS':\n      //return 'Email already exists';\n      swal(\"Oops\", \"Email already exists\", \"error\");\n      break;\n\n    case 'EMAIL_NOT_FOUND':\n      //return 'Email not found';\n      swal(\"Oops\", \"Email not found\", \"error\", {\n        button: \"Try Again!\"\n      });\n      break;\n\n    case 'INVALID_PASSWORD':\n      //return 'Invalid Password';\n      swal(\"Oops\", \"Invalid Password\", \"error\", {\n        button: \"Try Again!\"\n      });\n      break;\n\n    case 'USER_DISABLED':\n      return 'User Disabled';\n\n    default:\n      return '';\n  }\n}\nexport function saveTokenInLocalStorage(tokenDetails) {\n  tokenDetails.expireDate = new Date(new Date().getTime() + tokenDetails.expiresIn * 1000);\n  localStorage.setItem('userDetails', JSON.stringify(tokenDetails));\n}\nexport function runLogoutTimer(dispatch, timer, history) {\n  setTimeout(() => {\n    dispatch(logout(history));\n  }, timer);\n}\nexport function checkAutoLogin(dispatch, history) {\n  const tokenDetailsString = localStorage.getItem('userDetails');\n  let tokenDetails = '';\n\n  if (!tokenDetailsString) {\n    dispatch(logout(history));\n    return;\n  }\n\n  tokenDetails = JSON.parse(tokenDetailsString);\n  let expireDate = new Date(tokenDetails.expireDate);\n  let todaysDate = new Date();\n\n  if (todaysDate > expireDate) {\n    dispatch(logout(history));\n    return;\n  }\n\n  dispatch(loginConfirmedAction(tokenDetails));\n  const timer = expireDate.getTime() - todaysDate.getTime();\n  runLogoutTimer(dispatch, timer, history);\n}","map":{"version":3,"sources":["C:/Users/Asus/Documents/Data KAMPUS/SEMESTER 6/PROYEK 3/geotara/cms/frontend/src/services/AuthService.js"],"names":["axios","swal","loginConfirmedAction","logout","signUp","email","password","postData","returnSecureToken","post","login","formatError","errorResponse","error","message","button","saveTokenInLocalStorage","tokenDetails","expireDate","Date","getTime","expiresIn","localStorage","setItem","JSON","stringify","runLogoutTimer","dispatch","timer","history","setTimeout","checkAutoLogin","tokenDetailsString","getItem","parse","todaysDate"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport swal from \"sweetalert\";\r\nimport {\r\n    loginConfirmedAction,\r\n    logout,\r\n} from '../store/actions/AuthActions';\r\n\r\nexport function signUp(email, password) {\r\n    //axios call\r\n    const postData = {\r\n        email,\r\n        password,\r\n        returnSecureToken: true,\r\n    };\r\n    return axios.post(\r\n        `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyD3RPAp3nuETDn9OQimqn_YF6zdzqWITII`,\r\n        postData,\r\n    );\r\n}\r\n\r\nexport function login(email, password) {\r\n    const postData = {\r\n        email,\r\n        password,\r\n        returnSecureToken: true,\r\n    };\r\n    return axios.post(\r\n        `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyD3RPAp3nuETDn9OQimqn_YF6zdzqWITII`,\r\n        postData,\r\n    );\r\n}\r\n\r\nexport function formatError(errorResponse) {\r\n    switch (errorResponse.error.message) {\r\n        case 'EMAIL_EXISTS':\r\n            //return 'Email already exists';\r\n            swal(\"Oops\", \"Email already exists\", \"error\");\r\n            break;\r\n        case 'EMAIL_NOT_FOUND':\r\n            //return 'Email not found';\r\n           swal(\"Oops\", \"Email not found\", \"error\",{ button: \"Try Again!\",});\r\n           break;\r\n        case 'INVALID_PASSWORD':\r\n            //return 'Invalid Password';\r\n            swal(\"Oops\", \"Invalid Password\", \"error\",{ button: \"Try Again!\",});\r\n            break;\r\n        case 'USER_DISABLED':\r\n            return 'User Disabled';\r\n\r\n        default:\r\n            return '';\r\n    }\r\n}\r\n\r\nexport function saveTokenInLocalStorage(tokenDetails) {\r\n    tokenDetails.expireDate = new Date(\r\n        new Date().getTime() + tokenDetails.expiresIn * 1000,\r\n    );\r\n    localStorage.setItem('userDetails', JSON.stringify(tokenDetails));\r\n}\r\n\r\nexport function runLogoutTimer(dispatch, timer, history) {\r\n    setTimeout(() => {\r\n        dispatch(logout(history));\r\n    }, timer);\r\n}\r\n\r\nexport function checkAutoLogin(dispatch, history) {\r\n    const tokenDetailsString = localStorage.getItem('userDetails');\r\n    let tokenDetails = '';\r\n    if (!tokenDetailsString) {\r\n        dispatch(logout(history));\r\n        return;\r\n    }\r\n\r\n    tokenDetails = JSON.parse(tokenDetailsString);\r\n    let expireDate = new Date(tokenDetails.expireDate);\r\n    let todaysDate = new Date();\r\n\r\n    if (todaysDate > expireDate) {\r\n        dispatch(logout(history));\r\n        return;\r\n    }\r\n    dispatch(loginConfirmedAction(tokenDetails));\r\n\r\n    const timer = expireDate.getTime() - todaysDate.getTime();\r\n    runLogoutTimer(dispatch, timer, history);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}